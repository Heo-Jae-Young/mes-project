# 기술 스택 선택 근거 문서

HACCP 기반 MES 시스템 개발을 위한 기술 스택 선택 과정과 근거를 정리한 문서입니다.

## 🎯 프로젝트 특성 및 요구사항

### 프로젝트 성격
- **포트폴리오 프로젝트**: 빠른 개발과 완성도 둘 다 중요
- **단일 개발자**: 학습 곡선과 유지보수성 고려
- **HACCP/MES 도메인**: 데이터 중심, 규정 준수, 추적성이 핵심
- **실시간성**: CCP 모니터링, 생산 현황 실시간 표시 필요

### 기능적 요구사항
- **역할별 접근 제어**: Admin, Quality Manager, Operator
- **복잡한 폼 처리**: CCP 로그 입력, 생산 주문 등
- **데이터 시각화**: 컴플라이언스 리포트, 생산 효율성 차트
- **대용량 테이블**: 원자재 로트, 생산 기록 등
- **추적성**: 원자재 → 완성품 전체 경로 추적

## 🖥️ 백엔드 기술 스택

### Django REST Framework
**선택한 이유:**
- **규정 준수 특화**: Django ORM의 강력한 데이터 검증
- **관리자 인터페이스**: Django Admin으로 빠른 데이터 관리
- **보안**: CSRF, XSS 보호 기본 제공
- **성숙한 생태계**: 패키지가 풍부하고 안정적

**대안들:**
- **FastAPI**: 더 빠르지만 생태계가 상대적으로 작음
- **Flask**: 너무 미니멀해서 HACCP 같은 복잡한 도메인에 부적합
- **Node.js**: JavaScript 하나로 통일할 수 있지만 데이터 중심 애플리케이션에 Django가 더 적합

### MariaDB
**선택한 이유:**
- **ACID 특성**: HACCP 로그의 데이터 무결성 보장 필수
- **MySQL 호환**: 널리 사용되고 배포 환경 구축 쉬움
- **트랜잭션**: 복잡한 생산 주문 처리에 필요

**대안들:**
- **PostgreSQL**: 더 많은 기능이지만 HACCP 도메인에서 특별한 장점 없음
- **SQLite**: 개발용으로는 편하지만 운영 환경 부적합
- **MongoDB**: NoSQL의 유연성보다 RDBMS의 엄격함이 HACCP에 더 적합

### JWT Authentication
**선택한 이유:**
- **Stateless**: 확장성이 좋고 마이크로서비스 아키텍처에 적합
- **모바일 친화적**: 태블릿에서 CCP 모니터링 시 토큰 기반 인증 유리
- **표준**: RFC 7519 표준이라 다른 시스템과 연동 쉬움

**대안들:**
- **Session 기반**: 서버 상태 관리 부담, 확장성 제한
- **OAuth2**: 너무 복잡, 단일 애플리케이션에는 과도함

### Service Layer Pattern
**선택한 이유:**
- **비즈니스 로직 분리**: HACCP 규칙이 복잡해서 ViewSet과 분리 필요
- **테스트 용이성**: 단위 테스트 작성이 쉬워짐
- **재사용성**: 여러 ViewSet에서 동일한 비즈니스 로직 사용 가능

**대안들:**
- **Fat Models**: Django 전통 방식이지만 복잡한 도메인에서는 Model이 비대해짐
- **Fat Views**: 비즈니스 로직이 ViewSet에 집중되어 테스트 어려움

### django-cors-headers
- **역할**: 브라우저의 동일 출처 정책(Same-Origin Policy)으로 인해 발생하는 교차 출처(Cross-Origin) HTTP 요청 문제를 해결합니다. React 프론트엔드(예: `localhost:3000`)가 백엔드 API(`localhost:8000`)를 안전하게 호출하기 위해 필수적입니다.
- **대안**: Django 미들웨어를 직접 작성하여 CORS 헤더를 추가하는 방법.
- **선택 이유**: 직접 구현 시 발생할 수 있는 보안 허점을 방지하고, Django 커뮤니티에서 검증된 표준적인 방법을 사용하기 위함입니다. 설정이 간단하고 직관적입니다.

### django-filter
- **역할**: API URL의 쿼리 파라미터(예: `/api/ccp-logs/?status=CRITICAL`)를 기반으로 데이터 목록을 동적으로 필터링하는 기능을 쉽게 구현할 수 있게 해줍니다.
- **대안**: ViewSet에서 `get_queryset` 메소드를 오버라이드하여 수동으로 필터링 로직을 작성하는 방법.
- **선택 이유**: 수동 구현에 비해 코드 양이 훨씬 적고 가독성이 높습니다. 복잡한 필터 조건을 선언적으로 정의할 수 있어 유지보수가 용이합니다.

### python-decouple
- **역할**: `.env` 파일이나 환경 변수에서 설정 값(비밀 키, 데이터베이스 암호 등)을 안전하게 로드합니다. 소스 코드와 민감한 설정 정보를 분리하는 역할을 합니다.
- **대안**: `os.environ`을 직접 사용, `python-dotenv` 라이브러리.
- **선택 이유**: `python-decouple`은 설정 값이 없을 경우 기본값을 지정하거나, 필요한 타입으로 캐스팅하는(예: `config('DEBUG', default=False, cast=bool)`) 등 `os.environ`보다 더 편리하고 강력한 기능을 제공합니다.

### Gunicorn
- **역할**: 프로덕션 환경에서 Django 애플리케이션을 실행하기 위한 WSGI(Web Server Gateway Interface) HTTP 서버입니다. Django에 내장된 개발 서버(`runserver`)는 프로덕션용이 아닙니다.
- **대안**: `uWSGI`, `mod_wsgi` (Apache).
- **선택 이유**: `Gunicorn`은 설정이 간단하고, Python 커뮤니티에서 널리 사용되며, 대부분의 클라우드 플랫폼 및 Nginx와의 연동이 매우 쉽습니다.

### Pytest (pytest-django, pytest-cov)
- **역할**: 코드의 정확성을 검증하기 위한 테스트 프레임워크입니다.
  - **Pytest**: 간결한 문법과 강력한 Fixture 기능을 제공하는 사실상의 Python 표준 테스트 프레임워크입니다.
  - **pytest-django**: Django 환경을 Pytest에서 쉽게 테스트할 수 있도록 도와줍니다. (테스트 DB 생성, 클라이언트 제공 등)
  - **pytest-cov**: 테스트 코드 커버리지를 측정하여 테스트가 얼마나 충분한지 분석합니다.
- **대안**: Python 내장 `unittest` 프레임워크.
- **선택 이유**: `unittest`에 비해 `pytest`는 훨씬 적은 양의 코드로 동일한 테스트를 작성할 수 있으며, Fixture 시스템은 테스트의 재사용성과 가독성을 극적으로 향상시킵니다.

## 🎨 프론트엔드 기술 스택

### React 18
**선택한 이유:**
- **컴포넌트 재사용**: 폼, 테이블 등 반복되는 UI 컴포넌트 많음
- **생태계**: 차트, 테이블, 폼 라이브러리가 가장 풍부
- **학습 자료**: 가장 많은 학습 자료와 커뮤니티
- **취업 시장**: 가장 수요가 많은 기술

**대안들:**
- **Vue.js**: 학습 곡선이 완만하지만 생태계가 상대적으로 작음
- **Angular**: 너무 무겁고 복잡, 단일 개발자에게 부적합
- **Svelte**: 성능은 좋지만 생태계가 아직 작음

### TailwindCSS
**선택한 이유:**
- **빠른 개발**: 클래스명으로 즉시 스타일링, 별도 CSS 파일 불필요
- **일관성**: 디자인 시스템이 자동으로 구축됨
- **MES 시스템 특성**: 데이터 중심 UI에 최적화된 유틸리티 클래스
- **반응형**: 태블릿 CCP 모니터링에 필요한 반응형 쉽게 구현

**대안들:**
- **CSS Modules**: 너무 verbose, 개발 속도 느림
- **Styled Components**: 런타임 오버헤드, 번들 크기 증가
- **Material-UI**: 구글 디자인이라 산업용 소프트웨어 느낌 부족
- **Ant Design**: 무겁고 중국 회사 의존성

### Chart.js + react-chartjs-2
**선택한 이유:**
- **HACCP 특화**: 시계열 데이터, 임계값 표시에 최적화
- **가벼움**: 필요한 차트 타입만 선택적 로드 가능
- **커스터마이징**: CCP 모니터링용 특수 차트 구현 가능

**대안들:**
- **Recharts**: React 전용이지만 HACCP 시계열 데이터 처리에 Chart.js가 더 적합
- **D3.js**: 너무 복잡, 학습 곡선 가파름
- **ApexCharts**: 상업적 사용 제한, 라이선스 복잡

### React Hook Form
**선택한 이유:**
- **성능**: Re-render 최소화, CCP 로그 입력 시 부드러운 UX
- **검증**: HACCP 데이터 검증 규칙 구현 쉬움
- **TypeScript 지원**: 나중에 TS 전환 시 유리

**대안들:**
- **Formik**: 전통적이지만 성능상 re-render 이슈
- **직접 구현**: useState로 가능하지만 복잡한 검증 로직 구현 어려움

### TanStack Table
**선택한 이유:**
- **MES 핵심 기능**: 데이터 테이블이 애플리케이션의 80%
- **기능 풍부**: 정렬, 필터링, 페이지네이션, 가상화 모두 지원
- **성능**: 대용량 데이터도 처리 가능

**대안들:**
- **AG Grid**: 엔터프라이즈 기능은 유료
- **직접 구현**: 너무 복잡, 성능 이슈

### @heroicons/react
**선택한 이유:**
- **TailwindCSS 팀 제작**: 디자인 일관성 보장
- **SVG 기반**: 선명하고 가벼움
- **산업용 디자인**: 깔끔하고 전문적인 느낌

**대안들:**
- **React Icons**: 더 많은 아이콘이지만 일관성 부족
- **Font Awesome**: 무겁고 웹폰트 로딩 이슈

### date-fns
**선택한 이유:**
- **HACCP 특성**: 날짜/시간 처리가 매우 중요 (유통기한, CCP 모니터링)
- **Tree Shaking**: 사용하는 함수만 번들에 포함
- **Immutable**: 날짜 객체 변경으로 인한 버그 방지

**대안들:**
- **Moment.js**: deprecated, 무거움
- **Day.js**: 가볍지만 date-fns보다 기능 부족
- **네이티브 Date**: 너무 기본적, HACCP 도메인 로직 구현 어려움

### react-hot-toast
**선택한 이유:**
- **HACCP 알림**: CCP 이상 감지, 저장 완료 등 알림 많이 필요
- **가벼움**: 단순하고 빠름
- **TailwindCSS 호환**: 스타일 커스터마이징 쉬움

**대안들:**
- **react-toastify**: 더 무겁고 스타일 커스터마이징 어려움

## 🚀 배포 및 인프라

### Docker + Docker Compose
**선택한 이유:**
- **환경 일관성**: 개발/운영 환경 동일
- **포트폴리오**: 컨테이너화 경험 어필
- **배포 편의성**: 어떤 클라우드에든 쉽게 배포

### Nginx
**선택한 이유:**
- **정적 파일 서빙**: React 빌드 결과물 효율적 서빙
- **리버스 프록시**: Django API 프록시
- **SSL 종료**: HTTPS 설정 쉬움

## 📊 의사결정 매트릭스

| 기준 | 가중치 | Django | FastAPI | 선택 |
|------|--------|--------|---------|------|
| 개발 속도 | 30% | 9 | 7 | Django |
| 생태계 | 25% | 10 | 6 | Django |
| 학습 곡선 | 20% | 8 | 7 | Django |
| 성능 | 15% | 7 | 9 | Django |
| HACCP 적합성 | 10% | 9 | 6 | Django |

| 기준 | 가중치 | TailwindCSS | Material-UI | 선택 |
|------|--------|-------------|-------------|------|
| 개발 속도 | 35% | 9 | 8 | Tailwind |
| 커스터마이징 | 25% | 10 | 5 | Tailwind |
| 학습 곡선 | 20% | 6 | 8 | Tailwind |
| 번들 크기 | 10% | 9 | 4 | Tailwind |
| 산업용 디자인 | 10% | 8 | 6 | Tailwind |

## 🎯 향후 기술 전환 계획

### 단기 (3개월)
- **TypeScript 도입**: 타입 안정성 향상
- **React Query**: 서버 상태 관리 최적화
- **Storybook**: 컴포넌트 문서화

### 중기 (6개월)
- **테스트 코드**: Jest + React Testing Library
- **모니터링**: Sentry, LogRocket
- **성능 최적화**: Code Splitting, 이미지 최적화

### 장기 (1년)
- **마이크로서비스**: 도메인별 서비스 분리
- **GraphQL**: 복잡한 데이터 조회 최적화
- **PWA**: 오프라인 CCP 로그 작성 지원

## 💡 교훈 및 인사이트

### 좋았던 결정
1. **Service Layer 도입**: 복잡한 HACCP 로직 관리에 매우 효과적
2. **TailwindCSS**: 빠른 프로토타이핑에 최적, 디자인 일관성 자동 확보
3. **Docker**: 환경 이슈 0건, 배포 시간 대폭 단축

### 아쉬웠던 결정
1. **초기 TypeScript 미도입**: 나중에 전환하려니 작업량 증가
2. **테스트 코드 미비**: 리팩토링 시 불안감

### HACCP 도메인 특화 인사이트
1. **데이터 무결성이 최우선**: 성능보다 정확성이 중요
2. **규정 준수**: 감사 대응을 위한 로그 및 추적성 필수
3. **실시간성**: CCP 모니터링은 실시간, 리포트는 배치 처리로 분리

---

**문서 작성일**: 2025-09-02  
**작성자**: HACCP MES 개발팀  
**버전**: 1.0